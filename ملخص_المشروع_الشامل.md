# ููุฎุต ุดุงูู ููุดุฑูุน ุฎุฒุงูุฉ (Khezana)

## ๐ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

**ุฎุฒุงูุฉ (Khezana)** ูู ููุตุฉ ุฅููุชุฑูููุฉ ูุชุนุฏุฏุฉ ุงูุฎุฏูุงุช ููููุงุจุณ ูู ุณูุฑูุงุ ุชุชูุญ ูููุณุชุฎุฏููู:
- **ุงูุจูุน**: ุนุฑุถ ููุงุจุณ ููุจูุน
- **ุงูุชุฃุฌูุฑ**: ุชุฃุฌูุฑ ููุงุจุณ ููููุงุณุจุงุช
- **ุงููุดุงุฑูุฉ/ุงูุชุจุฑุน**: ูุดุงุฑูุฉ ููุงุจุณ ูุฌุงูุงู
- **ุงูุทูุจ ุงููุฎุตุต**: ุทูุจ ููุงุจุณ ูุญุฏุฏุฉ ูุงูุญุตูู ุนูู ุนุฑูุถ

### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
- **Framework**: Laravel 12.47.0
- **PHP**: 8.2+
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: MySQL
- **ุงููุตุงุฏูุฉ**: Laravel Breeze (Blade)
- **ููุญุฉ ุงูุฅุฏุงุฑุฉ**: Filament 5.0
- **ุงูุตูุงุญูุงุช**: Spatie Permission (ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช)
- **ูุงุฌูุฉ ุงููุณุชุฎุฏู**: Tailwind CSS + Alpine.js
- **ุฃุฏูุงุช ุงูุจูุงุก**: Vite

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ

#### 1. **users** - ุงููุณุชุฎุฏููู
```sql
- id (PK)
- name
- email (unique)
- phone
- password
- status (active/inactive)
- phone_verified_at
- email_verified_at
- remember_token
- timestamps
```

#### 2. **user_profiles** - ูููุงุช ุงููุณุชุฎุฏููู
```sql
- id (PK)
- user_id (FK -> users)
- city
- address
- avatar
- timestamps
```

#### 3. **categories** - ุงููุฆุงุช
```sql
- id (PK)
- parent_id (FK -> categories, nullable) - ูููุฆุงุช ุงููุฑุนูุฉ
- name
- slug (unique)
- description
- is_active (boolean)
- timestamps
```
**ุงูุนูุงูุงุช**: ูุฆุฉ ูููู ุฃู ูููู ููุง ูุฆุฉ ุฃุจ (hierarchical structure)

#### 4. **attributes** - ุงูุฎุตุงุฆุต ุงูุฏููุงููููุฉ
```sql
- id (PK)
- name
- slug (unique)
- type (enum: text, number, select)
- is_required (boolean)
- timestamps
```

#### 5. **attribute_values** - ููู ุงูุฎุตุงุฆุต (ููููุน select)
```sql
- id (PK)
- attribute_id (FK -> attributes)
- value
- timestamps
```

#### 6. **category_attribute** - ุฌุฏูู ุงูุฑุจุท (Pivot)
```sql
- category_id (FK -> categories)
- attribute_id (FK -> attributes)
- timestamps
```
**ุงูุบุฑุถ**: ุฑุจุท ุงูุฎุตุงุฆุต ุจุงููุฆุงุช

#### 7. **items** - ุงูุฅุนูุงูุงุช/ุงูููุชุฌุงุช
```sql
- id (PK)
- user_id (FK -> users)
- category_id (FK -> categories)
- operation_type (enum: sell, rent, donate)
- title
- slug
- description
- governorate (ุงููุญุงูุธุฉ)
- condition (ุงูุญุงูุฉ: ุฌุฏูุฏุ ูุณุชุนููุ ุฅูุฎ)
- price (decimal 10,2) - nullable
- deposit_amount (decimal 10,2) - nullable (ููุชุฃุฌูุฑ)
- is_available (boolean)
- availability_status (enum: available, unavailable, reserved)
- archived_at (datetime, nullable)
- deleted_at (soft delete)
- timestamps
```

#### 8. **item_images** - ุตูุฑ ุงูุฅุนูุงูุงุช
```sql
- id (PK)
- item_id (FK -> items)
- path
- is_primary (boolean)
- timestamps
```

#### 9. **item_attributes** - ููู ุงูุฎุตุงุฆุต ููุฅุนูุงูุงุช
```sql
- id (PK)
- attributable_type (polymorphic: Item, Request)
- attributable_id
- attribute_id (FK -> attributes)
- value
- timestamps
```
**ุงูุบุฑุถ**: ุชุฎุฒูู ุงูููู ุงูุฏููุงููููุฉ ููุฎุตุงุฆุต (ูุซู: ุงูููุงุณุ ุงููููุ ุฅูุฎ)

#### 10. **requests** - ุงูุทูุจุงุช
```sql
- id (PK)
- user_id (FK -> users)
- category_id (FK -> categories)
- title
- slug
- description
- status (enum: open, fulfilled, closed)
- archived_at (datetime, nullable)
- deleted_at (soft delete)
- timestamps
```

#### 11. **offers** - ุงูุนุฑูุถ ุนูู ุงูุทูุจุงุช
```sql
- id (PK)
- request_id (FK -> requests)
- user_id (FK -> users)
- item_id (FK -> items, nullable) - ูููู ุฑุจุทู ุจุฅุนูุงู ููุฌูุฏ
- operation_type (enum: sell, rent, donate)
- price (decimal 10,2) - nullable
- deposit_amount (decimal 10,2) - nullable
- status (enum: pending, accepted, rejected, cancelled)
- message
- timestamps
- UNIQUE(request_id, user_id) - ููุน ุนุฑุถูู ูู ููุณ ุงููุณุชุฎุฏู ุนูู ููุณ ุงูุทูุจ
```

#### 12. **approvals** - ุงูููุงููุงุช (ูุธุงู ุงููุฑุงุฌุนุฉ)
```sql
- id (PK)
- approvable_type (polymorphic: Item, Request)
- approvable_id
- status (enum: pending, approved, rejected, archived)
- submitted_by (FK -> users)
- reviewed_by (FK -> users, nullable)
- reviewed_at (datetime, nullable)
- rejection_reason (text, nullable)
- resubmission_count (integer)
- timestamps
```
**ุงูุบุฑุถ**: ูุธุงู ููุงููุฉ ุฅุฏุงุฑู ูุฌููุน ุงูุฅุนูุงูุงุช ูุงูุทูุจุงุช ูุจู ุงููุดุฑ

#### 13. **admin_actions_logs** - ุณุฌู ุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑุฉ
```sql
- id (PK)
- admin_id (FK -> users)
- action_type (string)
- target_type (string)
- target_id (integer)
- description
- metadata (JSON)
- timestamps
```

#### 14. **permissions** & **roles** & **model_has_permissions** & **role_has_permissions**
- ุฌุฏุงูู Spatie Permission ูุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ (Architecture)

### 1. **Models** (`app/Models/`)
- `User` - ุงููุณุชุฎุฏููู
- `UserProfile` - ูููุงุช ุงููุณุชุฎุฏููู
- `Category` - ุงููุฆุงุช (hierarchical)
- `Attribute` - ุงูุฎุตุงุฆุต
- `AttributeValue` - ููู ุงูุฎุตุงุฆุต
- `Item` - ุงูุฅุนูุงูุงุช
- `ItemImage` - ุตูุฑ ุงูุฅุนูุงูุงุช
- `ItemAttribute` - ููู ุงูุฎุตุงุฆุต ููุฅุนูุงูุงุช
- `Request` - ุงูุทูุจุงุช
- `Offer` - ุงูุนุฑูุถ
- `Approval` - ุงูููุงููุงุช
- `AdminActionLog` - ุณุฌู ุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑุฉ

### 2. **Traits** (`app/Traits/`)
- `HasApproval` - ุฅุถุงูุฉ ูุธุงุฆู ุงูููุงููุฉ ููููุฏููุงุช
- `HasAttributes` - ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต ุงูุฏููุงููููุฉ
- `HasCategory` - ุนูุงูุฉ ุงููุฆุฉ

### 3. **Enums** (`app/Enums/`)
- `OperationType`: `SELL`, `RENT`, `DONATE`
- `ApprovalStatus`: `PENDING`, `APPROVED`, `REJECTED`, `ARCHIVED`
- `RequestStatus`: `OPEN`, `FULFILLED`, `CLOSED`
- `OfferStatus`: `PENDING`, `ACCEPTED`, `REJECTED`, `CANCELLED`
- `ItemAvailability`: `AVAILABLE`, `UNAVAILABLE`, `RESERVED`
- `AttributeType`: `TEXT`, `NUMBER`, `SELECT`

### 4. **Controllers** (`app/Http/Controllers/`)

#### Controllers ุงูุนุงูุฉ:
- `HomeController` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `ItemController` - ุฅุฏุงุฑุฉ ุฅุนูุงูุงุช ุงููุณุชุฎุฏู (`/my-items`)
- `RequestController` - ุฅุฏุงุฑุฉ ุทูุจุงุช ุงููุณุชุฎุฏู (`/my-requests`)
- `OfferController` - ุฅุฏุงุฑุฉ ุงูุนุฑูุถ
- `FavoriteController` - ุงูููุถูุฉ
- `ProfileController` - ููู ุงููุณุชุฎุฏู

#### Controllers ุงูุนุงูุฉ (Public):
- `Public\ItemController` - ุนุฑุถ ุงูุฅุนูุงูุงุช ููุฌูููุฑ (`/items`)
- `Public\RequestController` - ุนุฑุถ ุงูุทูุจุงุช ููุฌูููุฑ (`/requests`)

#### Controllers ุงููุตุงุฏูุฉ:
- `Auth\*` - ุชุณุฌูู ุงูุฏุฎููุ ุงูุชุณุฌููุ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

### 5. **Services** (`app/Services/`)
- `ItemService` - ููุทู ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช
- `RequestService` - ููุทู ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- `OfferService` - ููุทู ุฅุฏุงุฑุฉ ุงูุนุฑูุถ
- `CategoryService` - ุฅุฏุงุฑุฉ ุงููุฆุงุช
- `AttributeService` - ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต
- `UserService` - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `ItemDeletionService` - ุญุฐู ุงูุฅุนูุงูุงุช
- `RequestDeletionService` - ุญุฐู ุงูุทูุจุงุช
- `AdminActionLogService` - ุณุฌู ุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑุฉ
- `RolePermissionService` - ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
- `Cache\CacheService` - ุฎุฏูุฉ ุงูุชุฎุฒูู ุงููุคูุช
- `Cache\CategoryCacheService` - ุชุฎุฒูู ุงููุฆุงุช ูุคูุชุงู
- `Cache\PublicCacheService` - ุชุฎุฒูู ุงููุญุชูู ุงูุนุงู ูุคูุชุงู

### 6. **Actions** (`app/Actions/`)
#### Approval Actions:
- `ApproveAction` - ุงูููุงููุฉ
- `RejectAction` - ุงูุฑูุถ
- `ArchiveAction` - ุงูุฃุฑุดูุฉ
- `SubmitForApprovalAction` - ุฅุฑุณุงู ูููุฑุงุฌุนุฉ

#### Item Actions:
- `CreateItemAction` - ุฅูุดุงุก ุฅุนูุงู
- `UpdateItemAction` - ุชุญุฏูุซ ุฅุนูุงู
- `DeleteItemAction` - ุญุฐู ุฅุนูุงู
- `ApproveItemAction` - ููุงููุฉ ุนูู ุฅุนูุงู
- `RejectItemAction` - ุฑูุถ ุฅุนูุงู
- `ArchiveItemAction` - ุฃุฑุดูุฉ ุฅุนูุงู
- `SubmitItemForApprovalAction` - ุฅุฑุณุงู ุฅุนูุงู ูููุฑุงุฌุนุฉ

#### Request Actions:
- `CreateRequestAction` - ุฅูุดุงุก ุทูุจ
- `UpdateRequestAction` - ุชุญุฏูุซ ุทูุจ
- `DeleteRequestAction` - ุญุฐู ุทูุจ
- `ApproveRequestAction` - ููุงููุฉ ุนูู ุทูุจ
- `RejectRequestAction` - ุฑูุถ ุทูุจ
- `ArchiveRequestAction` - ุฃุฑุดูุฉ ุทูุจ
- `CloseRequestAction` - ุฅุบูุงู ุทูุจ
- `SubmitRequestForApprovalAction` - ุฅุฑุณุงู ุทูุจ ูููุฑุงุฌุนุฉ

#### Offer Actions:
- `CreateOfferAction` - ุฅูุดุงุก ุนุฑุถ
- `UpdateOfferAction` - ุชุญุฏูุซ ุนุฑุถ
- `AcceptOfferAction` - ูุจูู ุนุฑุถ
- `RejectOfferAction` - ุฑูุถ ุนุฑุถ
- `CancelOfferAction` - ุฅูุบุงุก ุนุฑุถ

#### Category Actions:
- `CreateCategoryAction`
- `UpdateCategoryAction`
- `DeleteCategoryAction`

#### Attribute Actions:
- `AssignAttributeToCategoryAction` - ุฑุจุท ุฎุงุตูุฉ ุจูุฆุฉ
- `RemoveAttributeFromCategoryAction` - ุฅุฒุงูุฉ ุฎุงุตูุฉ ูู ูุฆุฉ

### 7. **Repositories** (`app/Repositories/`)
- `BaseRepository` - ุงููุณุชูุฏุน ุงูุฃุณุงุณู
- `UserRepository` - ูุณุชูุฏุน ุงููุณุชุฎุฏููู
- `UserProfileRepository` - ูุณุชูุฏุน ูููุงุช ุงููุณุชุฎุฏููู
- `AdminActionLogRepository` - ูุณุชูุฏุน ุณุฌู ุงูุฅุฌุฑุงุกุงุช

### 8. **DTOs** (`app/DTOs/`)
- `UserDTO` - ููู ุจูุงูุงุช ุงููุณุชุฎุฏู
- `UserProfileDTO` - ููู ุจูุงูุงุช ููู ุงููุณุชุฎุฏู
- `AdminActionLogDTO` - ููู ุจูุงูุงุช ุณุฌู ุงูุฅุฌุฑุงุกุงุช

### 9. **Policies** (`app/Policies/`)
- `ItemPolicy` - ุตูุงุญูุงุช ุงูุฅุนูุงูุงุช
- `RequestPolicy` - ุตูุงุญูุงุช ุงูุทูุจุงุช
- `OfferPolicy` - ุตูุงุญูุงุช ุงูุนุฑูุถ
- ูุบูุฑูุง...

### 10. **Events & Listeners** (`app/Events/` & `app/Listeners/`)
- Events ููุฃุญุฏุงุซ ุงููููุฉ (ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐู)
- `InvalidateItemCache` - ุฅุจุทุงู ุงูุชุฎุฒูู ุงููุคูุช ููุฅุนูุงูุงุช
- `InvalidateRequestCache` - ุฅุจุทุงู ุงูุชุฎุฒูู ุงููุคูุช ููุทูุจุงุช
- `LogAdminAction` - ุชุณุฌูู ุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑุฉ

### 11. **Filament Admin Panel** (`app/Filament/Resources/`)
- `UserResource` - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `CategoryResource` - ุฅุฏุงุฑุฉ ุงููุฆุงุช
- `AttributeResource` - ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต
- `ItemResource` - ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช
- `RequestResource` - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- `OfferResource` - ุฅุฏุงุฑุฉ ุงูุนุฑูุถ
- `ApprovalResource` - ุฅุฏุงุฑุฉ ุงูููุงููุงุช
- `RoleResource` - ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
- `PermissionResource` - ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

---

## ๐ฃ๏ธ ุงููุณุงุฑุงุช (Routes)

### ุงููุณุงุฑุงุช ุงูุนุงูุฉ (Public Routes)
```php
GET  /                          -> HomeController@index
GET  /items                      -> Public\ItemController@index (ูุงุฆูุฉ ุงูุฅุนูุงูุงุช)
GET  /items/{id}/{slug?}         -> Public\ItemController@show (ุชูุงุตูู ุฅุนูุงู)
GET  /requests                   -> Public\RequestController@index (ูุงุฆูุฉ ุงูุทูุจุงุช)
GET  /requests/{id}/{slug?}      -> Public\RequestController@show (ุชูุงุตูู ุทูุจ)
GET  /request-clothing           -> Public\RequestController@createInfo (ูุนูููุงุช ุฅูุดุงุก ุทูุจ)
```

### ุงููุณุงุฑุงุช ุงูุชู ุชุชุทูุจ ูุตุงุฏูุฉ
```php
GET  /my-items                   -> ItemController@index (ุฅุนูุงูุงุชู)
GET  /my-items/create            -> ItemController@create
POST /my-items                   -> ItemController@store
GET  /my-items/{item}            -> ItemController@show
GET  /my-items/{item}/edit       -> ItemController@edit
PUT  /my-items/{item}            -> ItemController@update
DELETE /my-items/{item}          -> ItemController@destroy
DELETE /my-items/{item}/force    -> ItemController@forceDestroy
POST /my-items/{item}/restore    -> ItemController@restore
POST /my-items/{item}/submit-for-approval -> ItemController@submitForApproval

GET  /my-requests                -> RequestController@index (ุทูุจุงุชู)
GET  /my-requests/create         -> RequestController@create
POST /my-requests                -> RequestController@store
GET  /my-requests/{request}      -> RequestController@show
GET  /my-requests/{request}/edit -> RequestController@edit
PUT  /my-requests/{request}     -> RequestController@update
DELETE /my-requests/{request}    -> RequestController@destroy
POST /my-requests/{request}/close -> RequestController@close
POST /my-requests/{request}/submit-for-approval -> RequestController@submitForApproval

GET  /requests/{request}/offers/create -> OfferController@create
POST /requests/{request}/offers        -> OfferController@store
GET  /offers/{offer}/edit              -> OfferController@edit
PUT  /offers/{offer}                   -> OfferController@update
POST /offers/{offer}/cancel            -> OfferController@cancel
POST /offers/{offer}/accept            -> OfferController@accept
POST /offers/{offer}/reject            -> OfferController@reject
```

### ุงููุณุงุฑุงุช ุงูุนุงูุฉ ูุน ุฅุนุงุฏุฉ ุชูุฌูู ูููุตุงุฏูุฉ (auth.redirect)
```php
POST /items/{item}/contact      -> Public\ItemController@contact
POST /items/{item}/favorite     -> FavoriteController@toggle
POST /items/{item}/report       -> Public\ItemController@report
POST /requests/{request}/offer  -> Public\RequestController@submitOffer
POST /requests/{request}/contact -> Public\RequestController@contact
POST /requests/{request}/report -> Public\RequestController@report
```

### ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
```php
GET  /login                     -> AuthenticatedSessionController@create
POST /login                     -> AuthenticatedSessionController@store
GET  /register                  -> RegisteredUserController@create
POST /register                  -> RegisteredUserController@store
POST /logout                    -> AuthenticatedSessionController@destroy
GET  /forgot-password           -> PasswordResetLinkController@create
POST /forgot-password           -> PasswordResetLinkController@store
GET  /reset-password/{token}    -> NewPasswordController@create
POST /reset-password            -> NewPasswordController@store
```

### ููุญุฉ ุงูุฅุฏุงุฑุฉ (Filament)
```
/admin -> Filament Admin Panel
```

---

## ๐จ ุงููุงุฌูุงุช (Views)

### Layouts (`resources/views/layouts/`)
- `app.blade.php` - Layout ูููุณุชุฎุฏููู ุงููุณุฌููู
- `home.blade.php` - Layout ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `auth.blade.php` - Layout ูุตูุญุงุช ุงููุตุงุฏูุฉ

### ุงูุตูุญุงุช ุงูุนุงูุฉ (`resources/views/public/`)
- `items/index.blade.php` - ูุงุฆูุฉ ุงูุฅุนูุงูุงุช ุงูุนุงูุฉ
- `items/show.blade.php` - ุชูุงุตูู ุฅุนูุงู
- `requests/index.blade.php` - ูุงุฆูุฉ ุงูุทูุจุงุช ุงูุนุงูุฉ
- `requests/show.blade.php` - ุชูุงุตูู ุทูุจ
- `requests/create-info.blade.php` - ูุนูููุงุช ุฅูุดุงุก ุทูุจ

### ุตูุญุงุช ุงููุณุชุฎุฏู (`resources/views/items/` & `resources/views/requests/`)
- `items/index.blade.php` - ุฅุนูุงูุงุชู
- `items/create.blade.php` - ุฅูุดุงุก ุฅุนูุงู
- `items/edit.blade.php` - ุชุนุฏูู ุฅุนูุงู
- `items/show.blade.php` - ุชูุงุตูู ุฅุนูุงู
- `requests/index.blade.php` - ุทูุจุงุชู
- `requests/create.blade.php` - ุฅูุดุงุก ุทูุจ
- `requests/show.blade.php` - ุชูุงุตูู ุทูุจ

### Partials (`resources/views/partials/`)
- `header.blade.php` - ุฑุฃุณ ุงูุตูุญุฉ
- `footer.blade.php` - ุชุฐููู ุงูุตูุญุฉ
- `filters.blade.php` - ููุงุชุฑ ุงูุจุญุซ
- `item-card.blade.php` - ุจุทุงูุฉ ุฅุนูุงู

### ุตูุญุงุช ุงููุตุงุฏูุฉ (`resources/views/auth/`)
- `login.blade.php` - ุชุณุฌูู ุงูุฏุฎูู
- `register.blade.php` - ุงูุชุณุฌูู

### ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`resources/views/home/`)
- `index.blade.php` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

---

## ๐ ุณูุฑ ุงูุนูู (Workflows)

### 1. ุณูุฑ ุนูู ุฅูุดุงุก ุฅุนูุงู
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ (`/my-items/create`)
2. ูุชู ุฅูุดุงุก ุงูุฅุนูุงู ุจุญุงูุฉ `pending` (ููุฏ ุงููุฑุงุฌุนุฉ)
3. ูุชู ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `approvals` ุจุญุงูุฉ `PENDING`
4. ุงูุฅุนูุงู ูุง ูุธูุฑ ููุฌูููุฑ ุญุชู ุงูููุงููุฉ
5. ุงูุฃุฏูู ูุฑุงุฌุน ุงูุฅุนูุงู ูู Filament
6. ุนูุฏ ุงูููุงููุฉ: `approval.status = APPROVED` โ ุงูุฅุนูุงู ูุธูุฑ ููุฌูููุฑ
7. ุนูุฏ ุงูุฑูุถ: `approval.status = REJECTED` โ ูุธูุฑ ุณุจุจ ุงูุฑูุถ ูููุณุชุฎุฏู

### 2. ุณูุฑ ุนูู ุฅูุดุงุก ุทูุจ
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ (`/my-requests/create`)
2. ูุชู ุฅูุดุงุก ุงูุทูุจ ุจุญุงูุฉ `open` ู `pending` ููููุงููุฉ
3. ุจุนุฏ ุงูููุงููุฉ: ุงูุทูุจ ูุธูุฑ ููุฌูููุฑ
4. ุงููุณุชุฎุฏููู ุงูุขุฎุฑูู ูููููู ุชูุฏูู ุนุฑูุถ (`/requests/{id}/offers/create`)
5. ุตุงุญุจ ุงูุทูุจ ููุจู/ูุฑูุถ ุงูุนุฑูุถ
6. ุนูุฏ ูุจูู ุนุฑุถ: `offer.status = ACCEPTED` โ `request.status = FULFILLED`
7. ูููู ุฅุบูุงู ุงูุทูุจ ูุฏููุงู: `request.status = CLOSED`

### 3. ุณูุฑ ุนูู ุงูุนุฑูุถ
1. ุงููุณุชุฎุฏู ููุฏู ุนุฑุถ ุนูู ุทูุจ (`/requests/{request}/offers/create`)
2. ูููู ุฑุจุท ุงูุนุฑุถ ุจุฅุนูุงู ููุฌูุฏ (`item_id`) ุฃู ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ
3. `offer.status = PENDING`
4. ุตุงุญุจ ุงูุทูุจ ููุจู/ูุฑูุถ/ููุบู
5. ุนูุฏ ุงููุจูู: ุฌููุน ุงูุนุฑูุถ ุงูุฃุฎุฑู ุนูู ููุณ ุงูุทูุจ ุชุตุจุญ `REJECTED` ุชููุงุฆูุงู

### 4. ุณูุฑ ุนูู ุงูููุงููุงุช
- ุฌููุน ุงูุฅุนูุงูุงุช ูุงูุทูุจุงุช ุชุญุชุงุฌ ููุงููุฉ ูุจู ุงููุดุฑ
- ุงูุฃุฏูู ูุฑุงุฌุน ูู Filament (`/admin/approvals`)
- ูููู ุงูููุงููุฉุ ุงูุฑูุถ (ูุน ุณุจุจ)ุ ุฃู ุงูุฃุฑุดูุฉ
- ุนูุฏ ุงูุฑูุถ: ูููู ูููุณุชุฎุฏู ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู (ูุฒูุฏ `resubmission_count`)

---

## ๐ ูุธุงู ุงูุตูุงุญูุงุช

### ุงูุฃุฏูุงุฑ (Roles)
- `super_admin` - ุงูุณูุจุฑ ุฃุฏูู (ูู ุงูุตูุงุญูุงุช)
- `admin` - ุงูุฃุฏูู (ุงูููุงููุงุชุ ุฅุฏุงุฑุฉ ุงููุญุชูู)
- `user` - ุงููุณุชุฎุฏู ุงูุนุงุฏู

### ุงูุตูุงุญูุงุช (Permissions)
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- ุฅุฏุงุฑุฉ ุงููุฆุงุช
- ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต
- ุงูููุงููุฉ ุนูู ุงูุฅุนูุงูุงุช
- ุงูููุงููุฉ ุนูู ุงูุทูุจุงุช
- ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
- ูุบูุฑูุง...

---

## ๐ ุงูุชุนุฏุฏ ุงููุบูู

### ุงููุบุงุช ุงููุฏุนููุฉ
- ุงูุนุฑุจูุฉ (`lang/ar/`)
- ุงูุฅูุฌููุฒูุฉ (`lang/en/`)

### ูููุงุช ุงูุชุฑุฌูุฉ
- `common.php` - ุงูุชุฑุฌูุงุช ุงููุดุชุฑูุฉ
- ูููุงุช ุฃุฎุฑู ุญุณุจ ุงูุญุงุฌุฉ

### ุงูุชุจุฏูู ุจูู ุงููุบุงุช
- ูุชู ุนุจุฑ `app()->setLocale()`
- ุงูุชุฎุฒูู ุงููุคูุช ุญุณุจ ุงููุบุฉ

---

## ๐พ ุงูุชุฎุฒูู ุงููุคูุช (Caching)

### ุฃููุงุน ุงูุชุฎุฒูู ุงููุคูุช
1. **Category Cache** - ุชุฎุฒูู ุงููุฆุงุช (ูุงุฏุฑุงู ูุง ุชุชุบูุฑ)
2. **Public Cache** - ุชุฎุฒูู ููุงุฆู ุงูุฅุนูุงูุงุช ูุงูุทูุจุงุช ุงูุนุงูุฉ
3. **Home Cache** - ุชุฎุฒูู ุงูุฅุนูุงูุงุช ุงููููุฒุฉ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

### ุฅุจุทุงู ุงูุชุฎุฒูู ุงููุคูุช
- ุนูุฏ ุฅูุดุงุก/ุชุญุฏูุซ/ุญุฐู ุฅุนูุงู โ `InvalidateItemCache`
- ุนูุฏ ุฅูุดุงุก/ุชุญุฏูุซ/ุญุฐู ุทูุจ โ `InvalidateRequestCache`

---

## ๐ฑ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุงูููุงููุงุช
- ูู ุฅุนูุงู ูุทูุจ ูุญุชุงุฌ ููุงููุฉ ูุจู ุงููุดุฑ
- ุชุชุจุน ุชุงุฑูุฎ ุงูููุงููุงุช ูุงูุฑูุถ
- ุฅููุงููุฉ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู ุจุนุฏ ุงูุฑูุถ

### 2. ูุธุงู ุงูุฎุตุงุฆุต ุงูุฏููุงููููุฉ
- ูู ูุฆุฉ ูููู ุฃู ูููู ููุง ุฎุตุงุฆุต ูุฎุตุตุฉ
- ุงูุฎุตุงุฆุต ุชูุฑุซ ูู ุงููุฆุฉ ุงูุฃุจ
- ุฃููุงุน: ูุตุ ุฑููุ ูุงุฆูุฉ ููุณุฏูุฉ

### 3. ูุธุงู ุงููุฆุงุช ุงููุฑูู
- ูุฆุงุช ุฑุฆูุณูุฉ ููุฆุงุช ูุฑุนูุฉ
- ุฏุนู ูุณุชููุงุช ูุชุนุฏุฏุฉ

### 4. ูุธุงู ุงูุนุฑูุถ
- ุนุฑุถ ูุงุญุฏ ููู ูุณุชุฎุฏู ุนูู ูู ุทูุจ
- ูููู ุฑุจุท ุงูุนุฑุถ ุจุฅุนูุงู ููุฌูุฏ
- ุฅุฏุงุฑุฉ ุญุงูุงุช ุงูุนุฑูุถ (pending, accepted, rejected, cancelled)

### 5. ุงูุจุญุซ ูุงูููุชุฑุฉ
- ุงูุจุญุซ ูู ุงูุนููุงู ูุงููุตู
- ุงูููุชุฑุฉ ุญุณุจ:
  - ููุน ุงูุนูููุฉ (ุจูุนุ ุชุฃุฌูุฑุ ุชุจุฑุน)
  - ุงููุฆุฉ
  - ุงููุญุงูุธุฉ
  - ูุทุงู ุงูุณุนุฑ
  - ุงูุญุงูุฉ (ูุชุงุญ/ุบูุฑ ูุชุงุญ)
- ุงูุชุฑุชูุจ (ุงูุฃุญุฏุซุ ุงูุณุนุฑุ ุงูุนููุงู)

### 6. ุงูููุถูุฉ
- ุฅุถุงูุฉ/ุฅุฒุงูุฉ ุฅุนูุงูุงุช ูู ุงูููุถูุฉ
- ูุชุทูุจ ุชุณุฌูู ุงูุฏุฎูู

### 7. ุงูุชูุงุตู ูุงูุฅุจูุงุบ
- ุฅุฑุณุงู ุฑุณุงุฆู ููุจุงุฆุน/ุตุงุญุจ ุงูุทูุจ
- ุงูุฅุจูุงุบ ุนู ูุญุชูู ุบูุฑ ููุงุณุจ

---

## ๐ฏ ููุงุนุฏ ุงูุนูู (Business Rules)

### ุงูุฅุนูุงูุงุช (Items)
1. ูุฌุจ ุชุญุฏูุฏ ุงูุณุนุฑ ููุจูุน ูุงูุชุฃุฌูุฑ
2. ูุฌุจ ุชุญุฏูุฏ ุงูุนุฑุจูู ููุชุฃุฌูุฑ
3. ูุง ูููู ุชุนุฏูู ุฅุนูุงู ููุฏ ุงููุฑุงุฌุนุฉ
4. ุงูุฅุนูุงู ูุฌุจ ุฃู ูููู ููุงูู ุนููู ููุชุงุญุงู ูุงุณุชูุจุงู ุงูุนุฑูุถ

### ุงูุทูุจุงุช (Requests)
1. ูุง ูููู ุชุนุฏูู ุทูุจ ูุบูู ุฃู ููุชูู
2. ุงูุทูุจ ูุฌุจ ุฃู ูููู ููุชูุญุงู ูุงุณุชูุจุงู ุนุฑูุถ ุฌุฏูุฏุฉ
3. ุนูุฏ ูุจูู ุนุฑุถ: ุงูุทูุจ ูุตุจุญ `FULFILLED` ุชููุงุฆูุงู

### ุงูุนุฑูุถ (Offers)
1. ูุณุชุฎุฏู ูุงุญุฏ = ุนุฑุถ ูุงุญุฏ ููู ุทูุจ (UNIQUE constraint)
2. ูููู ุชุญุฏูุซ ุงูุนุฑุถ ููุท ุฅุฐุง ูุงู `PENDING`
3. ุนูุฏ ูุจูู ุนุฑุถ: ุฌููุน ุงูุนุฑูุถ ุงูุฃุฎุฑู ุนูู ููุณ ุงูุทูุจ ุชุตุจุญ `REJECTED`
4. ูููู ุฅูุบุงุก ุนุฑุถ ุฅุฐุง ูุงู `PENDING`

### ุงูููุงููุงุช (Approvals)
1. ูู ุฅุนูุงู ูุทูุจ ูุญุชุงุฌ ููุงููุฉ ูุจู ุงููุดุฑ
2. ูููู ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู ุจุนุฏ ุงูุฑูุถ
3. ุชุชุจุน ุนุฏุฏ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู (`resubmission_count`)

---

## ๐ง ุงูุฅุนุฏุงุฏุงุช ูุงูุชูููู

### ูููุงุช ุงูุชูููู ุงููููุฉ
- `config/app.php` - ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
- `config/auth.php` - ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ
- `config/permission.php` - ุฅุนุฏุงุฏุงุช Spatie Permission
- `config/filament.php` - ุฅุนุฏุงุฏุงุช Filament

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ (.env)
- `APP_NAME=Khezana`
- `APP_LOCALE=ar` (ุฃู `en`)
- `DB_DATABASE=Khezana`
- ูุบูุฑูุง...

---

## ๐ฆ ุงูุญุฒู ุงููุซุจุชุฉ

### Production
- `filament/filament` - ููุญุฉ ุงูุฅุฏุงุฑุฉ
- `spatie/laravel-permission` - ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
- `laravel/scout` - ุงูุจุญุซ ุงููุตู ุงููุงูู (ุฌุงูุฒ)
- `spatie/laravel-sitemap` - ุฅูุดุงุก ุฎุฑูุทุฉ ุงููููุน
- `spatie/laravel-sluggable` - ุฅูุดุงุก slugs

### Development
- `laravel/breeze` - ุณูุงูุงุช ุงููุตุงุฏูุฉ
- `laravel/telescope` - ุงูุชุตุญูุญ ูุงููุฑุงูุจุฉ
- `barryvdh/laravel-debugbar` - ุดุฑูุท ุงูุชุตุญูุญ

---

## ๐จ ุงูุชุตููู ูุงููุงุฌูุฉ

### ูุธุงู ุงูุฃููุงู
- **Primary**: `#f59e0b` (ุฐูุจู/Amber)
- **Success**: `#10b981` (ุฃุฎุถุฑ)
- **Danger**: `#ef4444` (ุฃุญูุฑ)
- **Text**: `#1f2937` (ุฑูุงุฏู ุฏุงูู)

### ุงูุฎุทูุท
- **Figtree** ูู Google Fonts

### ุงูุฃุตูู (Assets)
- CSS: `public/css/home.css` (6824 ุณุทุฑ)
- JavaScript: `public/js/` (28 ููู)
- Fonts: `public/fonts/`

---

## ๐ ููุงุญุธุงุช ูููุฉ

### Soft Deletes
- `items` ู `requests` ูุณุชุฎุฏูุงู Soft Deletes
- ูููู ุงุณุชุนุงุฏุฉ ุงููุญุฐููุงุช
- `forceDelete` ููุญุฐู ุงูููุงุฆู

### Polymorphic Relationships
- `approvals` - ุนูุงูุฉ ูุชุนุฏุฏุฉ ุงูุฃุดูุงู ูุน `Item` ู `Request`
- `item_attributes` - ุนูุงูุฉ ูุชุนุฏุฏุฉ ุงูุฃุดูุงู ูุน `Item` ู `Request`

### Indexes
- ููุงุฑุณ ุนูู ุงูุฃุนูุฏุฉ ุงููููุฉ ููุฃุฏุงุก:
  - `user_id`, `category_id`, `operation_type`, `status`, `created_at`

### Constraints
- `UNIQUE(request_id, user_id)` ูู ุฌุฏูู `offers` - ููุน ุนุฑุถูู ูู ููุณ ุงููุณุชุฎุฏู

---

## ๐ ููุงุท ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ

### ูููุทูุฑูู ุงูุฌุฏุฏ
1. ุฑุงุฌุน ูุฐุง ุงูููู ุฃููุงู
2. ุงุจุฏุฃ ุจููู Models ูุงูุนูุงูุงุช
3. ุฑุงุฌุน Controllers ูููู ุณูุฑ ุงูุนูู
4. ุฑุงุฌุน Services ูููู ุงูููุทู
5. ุฑุงุฌุน Views ูููู ุงููุงุฌูุฉ

### ูุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ
1. ุญุฏุฏ ุงูุฌุฏูู/ุงูููุฏูู ุงููุทููุจ
2. ุฃูุดุฆ Migration ุฅุฐุง ูุฒู ุงูุฃูุฑ
3. ุฃูุดุฆ/ุญุฏุซ Model
4. ุฃูุดุฆ Service ููููุทู
5. ุฃูุดุฆ Action ุฅุฐุง ูุงู ุฅุฌุฑุงุก ูุนูุฏ
6. ุฃูุดุฆ/ุญุฏุซ Controller
7. ุฃูุดุฆ/ุญุฏุซ View
8. ุฃุถู Routes
9. ุฃุถู Policies ููุตูุงุญูุงุช
10. ุฃุถู Translations

---

## ๐ ุงููุฑุงุฌุน

- [Laravel Documentation](https://laravel.com/docs)
- [Filament Documentation](https://filamentphp.com/docs)
- [Spatie Permission](https://spatie.be/docs/laravel-permission)
- ููู `ูุตู ุงููุดุฑูุน.txt` - ุงููุตู ุงูุชูุตููู ูููุดุฑูุน
- ููู `design.md` - ุฏููู ุงูุชุตููู

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2026-01-22
**ุงูุฅุตุฏุงุฑ**: 1.0.0
**ุงููุทูุฑ**: kareem-sharaf
